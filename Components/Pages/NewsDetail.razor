@page "/news/{Id}"
@using GooruuSearchApp.Models
@using GooruuSearchApp.Services
@rendermode InteractiveServer
@inject MockSearchService SearchService
@inject NavigationManager NavManager

<PageTitle>@(article?.Title ?? "News Not Found") - DailyCrime</PageTitle>

@if (article == null)
{
    <div style="text-align:center; padding:50px;">
        <h2>ไม่พบข่าวที่คุณต้องการ</h2>
        <a href="/">กลับหน้าหลัก</a>
    </div>
}
else
{
    <div class="news-wrapper">
        <nav class="news-navbar">
            <div style="max-width:1100px; margin:0 auto; padding:0 20px; display:flex; justify-content:space-between; align-items:center;">
                <div style="font-size:1.5rem; font-weight:bold;">DAILY CRIME 🚨</div>
                <div>
                    <span style="margin-left:15px; cursor:pointer; opacity:0.8;">หน้าแรก</span>
                    <span style="margin-left:15px; cursor:pointer; font-weight:bold; text-decoration:underline;">อาชญากรรม</span>
                    <span style="margin-left:15px; cursor:pointer; opacity:0.8;">การเมือง</span>
                </div>
            </div>
        </nav>

        <div class="news-container">
            <main class="news-main">
                <h1 class="news-headline">@article.Title</h1>

                <div class="news-meta">
                    <span>โดย: ทีมข่าวอาชญากรรม</span> |
                    <span>@article.Date</span> |
                    <span>อ่านแล้ว: 14,205 ครั้ง</span>
                </div>

                <img src="@article.ImageUrl" style="width:100%; height:auto; margin-bottom:20px; border-radius:4px;" />

                <div class="news-body">
                    @((MarkupString)article.FullContent)
                </div>

                <div class="comment-section">
                    <h3>ความคิดเห็น (3)</h3>

                    <div class="fake-comment">
                        <div class="comment-user">Somsak_Detective</div>
                        <div>ดูจากรูปการณ์แล้ว ไม่น่าใช่การปล้นธรรมดา น่าจะมีเงื่อนงำ</div>
                        <div style="font-size:0.8rem; color:#888;">ตอบกลับ • ถูกใจ 45</div>
                    </div>

                    <div class="fake-comment">
                        <div class="comment-user">Nong_Meow</div>
                        <div>น่ากลัวมาก แถวบ้านเราเลย T_T</div>
                        <div style="font-size:0.8rem; color:#888;">ตอบกลับ • ถูกใจ 12</div>
                    </div>

                    <div class="fake-comment">
                        <div class="comment-user">Conan_Fanclub</div>
                        <div>คนร้ายต้องเป็นคนใกล้ตัวแน่นอน ฟันธง!</div>
                        <div style="font-size:0.8rem; color:#888;">ตอบกลับ • ถูกใจ 89</div>
                    </div>
                </div>
            </main>

            <aside>
                <div style="background:white; padding:20px; margin-bottom:20px;">
                    <h4>ข่าวที่น่าสนใจ</h4>
                    <hr />
                    <ul style="list-style:none; padding:0; line-height:1.6;">
                        <li>🔴 <a href="#">จับแพะ? คดีปล้นร้านทอง...</a></li>
                        <li>🔴 <a href="#">ลูกเนรคุณวางยาทั้งตระกูล...</a></li>
                        <li>🔴 <a href="#">หวยงวดนี้ออกอะไร คลิก!</a></li>
                    </ul>
                </div>

                <div style="background:#ddd; height:300px; display:flex; align-items:center; justify-content:center; color:#666;">
                    [พื้นที่โฆษณา 300x300]
                </div>
            </aside>
        </div>
    </div>
}

@code {
    [Parameter]
    public string Id { get; set; }

    private SearchResult? article;

    protected override void OnParametersSet()
    {
        article = SearchService.GetArticle(Id);
    }
}